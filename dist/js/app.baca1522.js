(function(e){function t(t){for(var l,a,i=t[0],s=t[1],u=t[2],p=0,f=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&f.push(n[a][0]),n[a]=0;for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l]);c&&c(t);while(f.length)f.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],l=!0,i=1;i<r.length;i++){var s=r[i];0!==n[s]&&(l=!1)}l&&(o.splice(t--,1),e=a(a.s=r[0]))}return e}var l={},n={app:0},o=[];function a(t){if(l[t])return l[t].exports;var r=l[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=l,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)a.d(r,l,function(t){return e[t]}.bind(null,l));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"54f8":function(e,t,r){"use strict";var l=r("e2c6"),n=r.n(l);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("96dd"),r("a60a"),r("e783"),r("8b1f");var l=r("6e6d"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app",attrs:{id:"app"}},[r("VueScrollRefreshLoad",{ref:"vueScroll",attrs:{"pull-up-load-error":e.pullUpLoadError,"pull-up-load-no-more-data":e.pullUpLoadNoMoreData,height:e.height},on:{refresh:e.onRefresh,pullup:e.onPullup,rePullUp:e.onRePullUp}},[e.loading?e._e():e._l(e.dataList,(function(t,l){return r("h1",{key:l},[e._v("我是第"+e._s(t)+"个元素")])})),e.loading?r("h1",[e._v("数据加载中...")]):e._e()],2)],1)},o=[],a=(r("63ff"),r("f8f9")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{ref:"vueScrollRefreshLoad",staticClass:"vue-scroll-refresh-load"},[r("div",{ref:"bsWrapper",staticClass:"vue-scroll-wrapper"},[r("div",{staticClass:"vue-scroll-content"},[e.pullDownConfig?r("div",{staticClass:"pulldown-tip"},[e._t("pulldownTip",[e._t("pullDownLoading",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.pulldownData.loading,expression:"pulldownData.loading"}],staticClass:"scroll-loading-wrap"},[r("div",{staticClass:"scroll-loading"},[r("svg",{staticClass:"loading-circular",attrs:{viewBox:"25 25 50 50"}},[r("circle",{attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])]),r("span",{staticClass:"scroll-loading-text"},[e._v(e._s(e.loadingText))])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.pulldownData.beforePullDown,expression:"pulldownData.beforePullDown"}],staticClass:"pulldown-text",domProps:{innerHTML:e._s(e.beforePullDownText)}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.pulldownData.refreshDataSuccess,expression:"pulldownData.refreshDataSuccess"}],domProps:{innerHTML:e._s(e.pullDownRefreshSuccessText)}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.pulldownData.refreshDataError,expression:"pulldownData.refreshDataError"}],domProps:{innerHTML:e._s(e.pullDownRefreshErrorText)}})])],2):e._e(),r("div",{staticClass:"slot-content"},[e._t("default")],2),e.pullUpConfig?r("div",{staticClass:"pullup-tip"},[e._t("pullupTip",[e._t("pullUpLoading",[r("div",{directives:[{name:"show",rawName:"v-show",value:e.pullupData.loading,expression:"pullupData.loading"}],staticClass:"scroll-loading-wrap"},[r("div",{staticClass:"scroll-loading"},[r("svg",{staticClass:"loading-circular",attrs:{viewBox:"25 25 50 50"}},[r("circle",{attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])]),r("span",{staticClass:"scroll-loading-text"},[e._v(e._s(e.loadingText))])])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.pullUpLoadError,expression:"pullUpLoadError"}],staticClass:"pullup-load-error",domProps:{innerHTML:e._s(e.pullUpFetchDataErrorText)},on:{click:e.rePullupLoad}}),r("div",{directives:[{name:"show",rawName:"v-show",value:e.pullUpLoadNoMoreData,expression:"pullUpLoadNoMoreData"}],staticClass:"pullup-no-more-data",domProps:{innerHTML:e._s(e.pullUpFetchDataNoMoreText)}})])],2):e._e()])])])},s=[],u=(r("efce"),r("4634"),r("ed8b"),r("97a3")),c=(r("8f42"),r("287e")),p=r("36e4"),f=r("39a9"),h=r("392c"),d=r("e8d2");function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,l)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(r,!0).forEach((function(t){Object(u["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}c["a"].use(p["a"]),c["a"].use(f["a"]),c["a"].use(h["a"]),c["a"].use(d["a"]);var g={name:"VueScrollRefreshLoad",props:{loadingText:{type:String,default:"加载中..."},beforePullDownText:{type:String,default:"下拉即可刷新"},pullDownRefreshSuccessText:{type:String,default:"数据刷新成功！"},pullDownRefreshErrorText:{type:String,default:"数据加载失败！"},pullUpFetchDataErrorText:{type:String,default:"请求失败，点击重新加载"},pullUpFetchDataNoMoreText:{type:String,default:"已经到底部，没有更多内容了"},pullDownConfig:{type:[Boolean,Object],default:function(){return{threshold:60}}},pullUpConfig:{type:[Boolean,Object],default:!0},betterScrollConfig:{type:Object,default:function(){return{}}},scrollbar:{type:Boolean,default:!0},height:{type:Number,default:0},stopTime:{type:Number,default:600},pullUpLoadError:{type:Boolean,default:!1},pullUpLoadNoMoreData:{type:Boolean,default:!1},click:{type:Boolean,default:!0},autoInit:{type:Boolean,default:!0}},data:function(){return{pulldownData:{loading:!1,refreshDataSuccess:!1,refreshDataError:!1,beforePullDown:!0},pullupData:{loading:!1}}},methods:{initScroll:function(){if(!this.bScroll)return this.height&&this.height>0&&(this.$refs.vueScrollRefreshLoad.style.height=this.height+"px"),this.bScroll=new c["a"](this.$refs.bsWrapper,w({scrollY:!0,pullDownRefresh:this.pullDownConfig,scrollbar:this.scrollbar,pullUpLoad:this.pullUpConfig,click:this.click},this.betterScrollConfig)),console.log("BS",this.bScroll),this.pullDownConfig&&this.bScroll.on("pullingDown",this._pullingDownHandler),this.pullUpConfig&&this.bScroll.on("pullingUp",this._pullingUpHandler),this.bScroll;console.error("better-scroll已经初始化，请勿重复初始化！")},refresh:function(){var e=this;if(this.bScroll)var t=setTimeout((function(){clearTimeout(t),e.bScroll.refresh()}),100);else console.error("better-scroll未初始化！")},autoPullDownRefresh:function(){this.bScroll&&this.bScroll.autoPullDownRefresh()},_pullingDownHandler:function(){this.pulldownData.beforePullDown=!1,this.pulldownData.loading=!0,this.$emit("refresh",this.finishPullDown)},finishPullDown:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r,l=this,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=!(n.length>0&&void 0!==n[0])||n[0],this.pulldownData.loading=!1,this.pulldownData.refreshDataSuccess=t,this.pulldownData.refreshDataError=!t,e.next=6,new Promise((function(e){var t=setTimeout((function(){clearTimeout(t),l.bScroll.finishPullDown(),e()}),l.stopTime)}));case 6:r=setTimeout((function(){clearTimeout(r),l.pulldownData.refreshDataSuccess=!1,l.pulldownData.refreshDataError=!1,l.pulldownData.beforePullDown=!0,l.bScroll.refresh()}),this.stopTime+200);case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),_pullingUpHandler:function(){var e=this;if(this.pullUpLoadError||this.pullUpLoadNoMoreData){var t=setTimeout((function(){clearTimeout(t),e.pullupData.loading=!1,e.bScroll.finishPullUp(),e.refresh()}),this.bScroll.options.bounceTime);console.log("上拉加载被阻止了")}else console.log("处理上拉加载"),this.pullupData.loading=!0,this.$nextTick((function(){e.bScroll.refresh(),e.$emit("pullup",e.finishPullUp)}))},finishPullUp:function(){this.pullupData.loading=!1,this.bScroll.finishPullUp(),this.refresh()},rePullupLoad:function(){this.$emit("rePullUp",this.finishPullUp),this.pullupData.loading=!0}},watch:{height:function(e){this.$refs.vueScrollRefreshLoad.style.height=e+"px",this.refresh()},pullUpLoadNoMoreData:function(e,t){!e&&t&&(this.pullupData.loading=!0,this.refresh())}},created:function(){this.bScroll=null},mounted:function(){this.autoInit&&this.initScroll()}},m=g,b=m,D=(r("54f8"),r("6691")),y=Object(D["a"])(b,i,s,!1,null,null,null),x=y.exports;function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;console.log("step",e);var t=Array.apply(null,{length:30+e}).map((function(){return 30*e+(arguments.length<=1?void 0:arguments[1])}));return t}var S={name:"app",components:{VueScrollRefreshLoad:x},data:function(){return{dataList:[],step:0,pullupTime:0,pullDownTime:0,pullUpLoadError:!1,pullUpLoadNoMoreData:!1,height:300,loading:!0}},methods:{onRefresh:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!==this.pullDownTime){e.next=3;break}return r=setTimeout((function(){clearTimeout(r),t(!1)}),1500),e.abrupt("return");case 3:return e.next=5,this.requestData();case 5:t(),this.pullDownTime++;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),onPullup:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,l=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(2!==this.pullupTime){e.next=3;break}return r=setTimeout((function(){clearTimeout(r),l.pullUpLoadError=!0,t()}),1500),e.abrupt("return");case 3:return e.next=5,this.requestData(null,!0);case 5:t(),this.pullupTime++;case 7:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),requestData:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var l,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.ajaxGet();case 3:l=e.sent,this.loading=!1,r?(n=this.dataList.concat(l),this.dataList=n):this.dataList=l,this.step++,t&&"function"===typeof t&&t(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t,r){return e.apply(this,arguments)}return t}(),ajaxGet:function(){var e=this;return new Promise((function(t){var r=setTimeout((function(){clearTimeout(r);var l=T(e.step);t(l)}),2e3)}))},onRePullUp:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.pullUpLoadError=!1,e.next=3,this.requestData(null,!0);case 3:t(),this.pullupTime++;case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},mounted:function(){var e=this;this.requestData((function(){e.$refs.vueScroll.refresh();var t=setTimeout((function(){console.log("改变高度了"),clearTimeout(t),e.height=450}),1e3)}))}},P=S,O=(r("7c55"),Object(D["a"])(P,n,o,!1,null,null,null)),U=O.exports;l["a"].config.productionTip=!1,new l["a"]({render:function(e){return e(U)}}).$mount("#app")},"7c55":function(e,t,r){"use strict";var l=r("bc84"),n=r.n(l);n.a},bc84:function(e,t,r){},e2c6:function(e,t,r){}});
//# sourceMappingURL=app.baca1522.js.map